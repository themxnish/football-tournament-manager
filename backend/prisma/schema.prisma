generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String   @unique
  password  String
  fullName  String?
  role      String   @default("volunteer")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Team {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  category    String
  coach       String

  schedulesAsTeamA Schedule[] @relation("TeamA")
  schedulesAsTeamB Schedule[] @relation("TeamB")
}

model Schedule {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  date      DateTime
  time      String
  pitch     String
  status    Boolean @default(false)
  category  String

  teamAId   String   @db.ObjectId
  teamA     Team     @relation("TeamA", fields: [teamAId], references: [id])

  teamBId   String   @db.ObjectId
  teamB     Team     @relation("TeamB", fields: [teamBId], references: [id])

  matchRecord MatchRecord[]
}

model MatchRecord {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  teamAId     String   @db.ObjectId
  teamBId     String   @db.ObjectId
  scoreA      Int      @default(0)
  scoreB      Int      @default(0)
  scorersA    String[]
  scorersB    String[]
  potmA       String?
  potmB       String?

  winner      String?
  
  scheduleId  String   @db.ObjectId
  schedule    Schedule @relation(fields: [scheduleId], references: [id])
}
